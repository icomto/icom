(function(b){b.fn.superfish=function(n){var g=b.fn.superfish,l=g.c,f=b(['<span class="',l.arrowClass,'"> &#187;</span>'].join("")),j=function(){var c=b(this),o=d(c);clearTimeout(o.sfTimer);clearTimeout(o.sfOutTimer);if(o.visible){c.showSuperfishUl().siblings().hideSuperfishUl()}else{g.current=this;o.sfOutTimer=setTimeout(function(){var p=b(g.current);p.showSuperfishUl().siblings().hideSuperfishUl();d(p).visible=true},g.op.delayOver)}},e=function(){var c=b(this),q=d(c),p=g.op;clearTimeout(q.sfTimer);clearTimeout(q.sfOutTimer);g.current=this;q.sfTimer=setTimeout(function(){var r=b(g.current),t=g.op;d(r).visible=false;t.retainPath=(b.inArray(r[0],t.$path)>-1);r.hideSuperfishUl();if(t.$path.length&&r.parents(["li.",t.hoverClass].join("")).length<1){j.call(t.$path)}},p.delay)},d=function(c){var o=c.parents(["ul.",l.menuClass,":first"].join(""))[0];g.op=g.o[o.serial];return o},h=function(c){c.addClass(l.anchorClass).append(f.clone())};return this.each(function(){var c=this.serial=g.o.length;var q=b.extend({},g.defaults,n);q.$path=b("li."+q.pathClass,this).slice(0,q.pathLevels).each(function(){b(this).addClass([q.hoverClass,l.bcClass].join(" ")).filter("li:has(ul)").removeClass(q.pathClass)});g.o[c]=g.op=q;b("li:has(ul)",this)[(b.fn.hoverIntent&&!q.disableHI)?"$.fn.hoverIntent":"hover"](j,e).each(function(){if(q.autoArrows){h(b(">a:first-child",this))}}).not("."+l.bcClass).hideSuperfishUl();var p=b("a",this);p.each(function(o){var r=p.eq(o).parents("li");p.eq(o).focus(function(){j.call(r)}).blur(function(){e.call(r)})});q.onInit.call(this)}).each(function(){var c=[l.menuClass];b(this).addClass(c.join(" "))})};var a=b.fn.superfish;a.o=[];a.op={};a.c={bcClass:"sf-breadcrumb",menuClass:"sf-js-enabled",anchorClass:"sf-with-ul",arrowClass:"sf-sub-indicator"};a.defaults={hoverClass:"sfHover",pathClass:"overideThisToUse",pathLevels:1,delay:800,delayOver:400,animation:{opacity:"show"},speed:"normal",autoArrows:true,disableHI:false,onInit:function(){},onBeforeShow:function(){},onShow:function(){},onHide:function(){}};b.fn.extend({hideSuperfishUl:function(){var e=a.op,d=(e.retainPath===true)?e.$path:"";e.retainPath=false;var c=b(["li.",e.hoverClass].join(""),this).add(this).not(d).removeClass(e.hoverClass).find(">ul").hide().css("visibility","hidden");e.onHide.call(c);return this},showSuperfishUl:function(){var d=a.op,c=this.addClass(d.hoverClass).find(">ul:hidden").css("visibility","visible");d.onBeforeShow.call(c);c.animate(d.animation,d.speed,function(){d.onShow.call(c)});return this}})})(jQuery);
/*
 * JSizes - JQuery plugin v0.32
 *
 * Licensed under the revised BSD License.
 * Copyright 2008, Bram Stein
 * All rights reserved.
 */
(function(b){var a=function(c){return parseInt(c,10)||0};b.each(["min","max"],function(d,c){b.fn[c+"Size"]=function(g){var f,e;if(g){if(g.width){this.css(c+"-width",g.width)}if(g.height){this.css(c+"-height",g.height)}return this}else{f=this.css(c+"-width");e=this.css(c+"-height");return{width:(c==="max"&&(f===undefined||f==="none"||a(f)===-1)&&Number.MAX_VALUE)||a(f),height:(c==="max"&&(e===undefined||e==="none"||a(e)===-1)&&Number.MAX_VALUE)||a(e)}}}});b.fn.isVisible=function(){return this.css("visibility")!=="hidden"&&this.css("display")!=="none"};b.each(["border","margin","padding"],function(d,c){b.fn[c]=function(e){if(e){if(e.top){this.css(c+"-top"+(c==="border"?"-width":""),e.top)}if(e.bottom){this.css(c+"-bottom"+(c==="border"?"-width":""),e.bottom)}if(e.left){this.css(c+"-left"+(c==="border"?"-width":""),e.left)}if(e.right){this.css(c+"-right"+(c==="border"?"-width":""),e.right)}return this}else{return{top:a(this.css(c+"-top"+(c==="border"?"-width":""))),bottom:a(this.css(c+"-bottom"+(c==="border"?"-width":""))),left:a(this.css(c+"-left"+(c==="border"?"-width":""))),right:a(this.css(c+"-right"+(c==="border"?"-width":"")))}}}})})(jQuery);$(function(){var d,q=null,e=null,r=null,g=null,n=null,a="left";$.fn.extend({tooltip:function(h){h=$.extend({id:"tooltip",extraClass:"",initDelay:300,jumpDelay:-1,exitDelay:200,track:true,positionBy:"mouse",top:15,left:15,margin:15,bodyHandler:null,readyHandler:null,hideOnMouseOut:true,hideOnInnerClick:true,hideOnOuterClick:true,dragDropElement:""},h);if(h.jumpDelay==-1){h.jumpDelay=h.initDelay}if(!d){d=$('<div id="'+h.id+'"></div>').appendTo(document.body).hide().mouseover(function(){if(g){clearTimeout(g)}g=null})}return this.each(function(){$.data(this,"tooltip",h);if(h.hideOnMouseOut){$(this).bind("mouseout",f)}if(h.hideOnInnerClick){$(this).bind("click",b)}}).mouseover(p)}});function p(t){try{if(g&&q==this){clearTimeout(g);g=null}if(q==this||e==this){return}if(r){clearTimeout(r);r=null}var h=$.data(this,"tooltip");if(!h.bodyHandler){return}r=null;e=this;if(!h.initDelay||(h.jumpDelay==0&&d.is(":visible"))){j(t)}else{n=t;r=setTimeout(j,d.is(":visible")?h.jumpDelay:h.initDelay)}}catch(t){reportAjaxError(t)}}function j(u){try{if(!e){return}q=e;e=null;a="left";if(g){clearTimeout(g);g=null}r=null;var h=$.data(q,"tooltip");if(h.hideOnMouseOut){d.bind("mouseout",f)}else{d.unbind("mouseout",f)}if(h.hideOnInnerClick){d.bind("click",b)}else{d.unbind("click",b)}if(h.hideOnOuterClick){$(document.body).bind("click",b)}else{$(document.body).unbind("click",b)}d.html(h.bodyHandler.call(q,h)).addClass(h.extraClass).show();if(h.dragDropElement){$(h.dragDropElement,d).css({cursor:"move"}).bind("mousedown",l)}switch(h.positionBy){default:c(n?n:u);n=null;if(h.track){d.bind("mousemove",c);$(document.body).bind("mousemove",c);h.moveTop=h.top;h.moveLeft=h.left}else{d.unbind("mousemove",c);$(document.body).unbind("mousemove",c)}d.css({position:"absolute"});break;case"element":var t=$(q).position();d.css({position:"absolute",top:t.top+h.top,left:t.left+h.left});break;case"absolute":d.css({position:"absolute",top:h.top,left:h.left});break;case"fixed":d.css({position:"fixed",top:h.top,left:h.left});break}if(h.readyHandler){h.readyHandler.call(q)}}catch(u){reportAjaxError("s:"+u)}}function l(u){if(!u||!q){return}var h=$.data(q,"tooltip");if(!h){return}var t=d.position();h.moveTop=t.top-u.pageY;h.moveLeft=t.left-u.pageX;$(document.body).bind("mousemove",c).bind("mouseup",o)}function o(h){$(document.body).unbind("mousemove",c).unbind("mouseup",o)}function c(w){try{if(!q){return}var F=$.data(q,"tooltip");if(!F){return}var A=w.pageY+F.moveTop,v=w.pageX+F.moveLeft,E=d.height(),t=d.width(),h=A+E,D=v+t,z=$(window).scrollTop(),u=$(window).scrollLeft(),C=(z+$(window).height())-F.margin,y=(u+$(window).width())-F.margin;z+=F.margin;u+=F.margin;if(h>C){var B=E+Math.round(F.margin*2.25);if(A-B>z){A-=B}}if(D>y){if(a=="right"||(D-y>t*0.4)){v-=t+Math.round(F.margin*2.25);a="right"}else{v-=D-y}}else{a="left"}if(v<u){v+=u-v}d.css({top:A,left:v})}catch(w){reportAjaxError("m:"+w)}}function f(){try{if(this==e){e=null}if(g){clearTimeout(g)}if(!q){b()}else{var h=$.data(q,"tooltip");if(h&&h.exitDelay>0){g=setTimeout(b,h.exitDelay)}else{if(!h||h.exitDelay==0){b()}}}}catch(t){reportAjaxError("h:"+t)}}function b(u){try{if(q){var h=$.data(q,"tooltip");if(h&&u&&h.hideOnOuterClick&&!h.hideOnInnerClick&&this==document.body){var t=d.position();if(u.pageY>t.top&&u.pageX>t.left&&u.pageY<t.top+d.height()&&u.pageX<t.left+d.width()){return}}}else{var h=null}d.hide();d.unbind("click",b).unbind("mouseout",f).unbind("mousemove",c);$(document.body).unbind("click",b).unbind("mousemove",c);if(g){clearTimeout(g);g=null}if(h){d.removeClass(h.extraClass)}q=null}catch(u){reportAjaxError("_h:"+u)}}});(function(a){a.fn.lightBox=function(t){t=jQuery.extend({overlayBgColor:"#000",overlayOpacity:0.8,fixedNavigation:false,imageLoading:"/lib/lightbox-0.5/ico-loading.gif",imageBtnPrev:"/lib/lightbox-0.5/btn-prev.gif",imageBtnNext:"/lib/lightbox-0.5/btn-next.gif",imageBtnClose:"/lib/lightbox-0.5/btn-close.gif",imageBlank:"/lib/lightbox-0.5/blank.gif",containerBorderSize:10,containerResizeSpeed:400,txtImage:"Image",txtOf:"of",keyToClose:"c",keyToPrev:"p",keyToNext:"n",imageArray:[],activeImage:0},t);var j=this;function v(){r(this,j);return false}function r(z,y){a("embed, object, select").css({visibility:"hidden"});c();t.imageArray.length=0;t.activeImage=0;if(y.length==1){t.imageArray.push(new Array(z.getAttribute("href"),z.getAttribute("title")))}else{for(var x=0;x<y.length;x++){t.imageArray.push(new Array(y[x].getAttribute("href"),y[x].getAttribute("title")))}}while(t.imageArray[t.activeImage][0]!=z.getAttribute("href")){t.activeImage++}o()}function c(){a("body").append('<div id="jquery-overlay"></div><div id="jquery-lightbox"><div id="lightbox-container-image-box"><div id="lightbox-container-image"><img id="lightbox-image"><div style="" id="lightbox-nav"><a href="javascript:void(0);" id="lightbox-nav-btnPrev"></a><a href="javascript:void(0);" id="lightbox-nav-btnNext"></a></div><div id="lightbox-loading"><a href="javascript:void(0);" id="lightbox-loading-link"><img src="'+t.imageLoading+'"></a></div></div></div><div id="lightbox-container-image-data-box"><div id="lightbox-container-image-data"><div id="lightbox-image-details"><span id="lightbox-image-details-caption"></span><span id="lightbox-image-details-currentNumber"></span></div><div id="lightbox-secNav"><a href="javascript:void(0);" id="lightbox-secNav-btnClose"><img src="'+t.imageBtnClose+'"></a></div></div></div></div>');var x=f();a("#jquery-overlay").css({backgroundColor:t.overlayBgColor,opacity:t.overlayOpacity,width:x[0],height:x[1]}).fadeIn();var y=h();a("#jquery-lightbox").css({top:y[1]+(x[3]/10),left:y[0]}).show();a("#jquery-overlay,#jquery-lightbox").click(function(){b()});a("#lightbox-loading-link,#lightbox-secNav-btnClose").click(function(){b();return false});a(window).resize(function(){var z=f();a("#jquery-overlay").css({width:z[0],height:z[1]});var A=h();a("#jquery-lightbox").css({top:A[1]+(z[3]/10),left:A[0]})})}function o(){a("#lightbox-loading").show();if(t.fixedNavigation){a("#lightbox-image,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide()}else{a("#lightbox-image,#lightbox-nav,#lightbox-nav-btnPrev,#lightbox-nav-btnNext,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide()}var x=new Image();x.onload=function(){a("#lightbox-image").attr("src",t.imageArray[t.activeImage][0]);l(x.width,x.height);x.onload=function(){}};x.src=t.imageArray[t.activeImage][0]}function l(A,D){var x=a("#lightbox-container-image-box").width();var C=a("#lightbox-container-image-box").height();var B=(A+(t.containerBorderSize*2));var z=(D+(t.containerBorderSize*2));var y=x-B;var E=C-z;a("#lightbox-container-image-box").animate({width:B,height:z},t.containerResizeSpeed,function(){g()});if((y==0)&&(E==0)){if(a.browser.msie){q(250)}else{q(100)}}a("#lightbox-container-image-data-box").css({width:A});a("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({height:D+(t.containerBorderSize*2)})}function g(){a("#lightbox-loading").hide();a("#lightbox-image").fadeIn(function(){n();w()});u()}function n(){a("#lightbox-container-image-data-box").slideDown("fast");a("#lightbox-image-details-caption").hide();if(t.imageArray[t.activeImage][1]){a("#lightbox-image-details-caption").html(t.imageArray[t.activeImage][1]).show()}if(t.imageArray.length>1){a("#lightbox-image-details-currentNumber").html(t.txtImage+" "+(t.activeImage+1)+" "+t.txtOf+" "+t.imageArray.length).show()}}function w(){a("#lightbox-nav").show();a("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({background:"transparent url("+t.imageBlank+") no-repeat"});if(t.activeImage!=0){if(t.fixedNavigation){a("#lightbox-nav-btnPrev").css({background:"url("+t.imageBtnPrev+") left 15% no-repeat"}).unbind().bind("click",function(){t.activeImage=t.activeImage-1;o();return false})}else{a("#lightbox-nav-btnPrev").unbind().hover(function(){a(this).css({background:"url("+t.imageBtnPrev+") left 15% no-repeat"})},function(){a(this).css({background:"transparent url("+t.imageBlank+") no-repeat"})}).show().bind("click",function(){t.activeImage=t.activeImage-1;o();return false})}}if(t.activeImage!=(t.imageArray.length-1)){if(t.fixedNavigation){a("#lightbox-nav-btnNext").css({background:"url("+t.imageBtnNext+") right 15% no-repeat"}).unbind().bind("click",function(){t.activeImage=t.activeImage+1;o();return false})}else{a("#lightbox-nav-btnNext").unbind().hover(function(){a(this).css({background:"url("+t.imageBtnNext+") right 15% no-repeat"})},function(){a(this).css({background:"transparent url("+t.imageBlank+") no-repeat"})}).show().bind("click",function(){t.activeImage=t.activeImage+1;o();return false})}}p()}function p(){a(document).keydown(function(x){d(x)})}function e(){a(document).unbind()}function d(x){if(x==null){keycode=event.keyCode;escapeKey=27}else{keycode=x.keyCode;escapeKey=x.DOM_VK_ESCAPE}key=String.fromCharCode(keycode).toLowerCase();if((key==t.keyToClose)||(key=="x")||(keycode==escapeKey)){b()}if((key==t.keyToPrev)||(keycode==37)){if(t.activeImage!=0){t.activeImage=t.activeImage-1;o();e()}}if((key==t.keyToNext)||(keycode==39)){if(t.activeImage!=(t.imageArray.length-1)){t.activeImage=t.activeImage+1;o();e()}}}function u(){if((t.imageArray.length-1)>t.activeImage){objNext=new Image();objNext.src=t.imageArray[t.activeImage+1][0]}if(t.activeImage>0){objPrev=new Image();objPrev.src=t.imageArray[t.activeImage-1][0]}}function b(){a("#jquery-lightbox").remove();a("#jquery-overlay").fadeOut(function(){a("#jquery-overlay").remove()});a("embed, object, select").css({visibility:"visible"})}function f(){var z,x;if(window.innerHeight&&window.scrollMaxY){z=window.innerWidth+window.scrollMaxX;x=window.innerHeight+window.scrollMaxY}else{if(document.body.scrollHeight>document.body.offsetHeight){z=document.body.scrollWidth;x=document.body.scrollHeight}else{z=document.body.offsetWidth;x=document.body.offsetHeight}}var y,A;if(self.innerHeight){if(document.documentElement.clientWidth){y=document.documentElement.clientWidth}else{y=self.innerWidth}A=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){y=document.documentElement.clientWidth;A=document.documentElement.clientHeight}else{if(document.body){y=document.body.clientWidth;A=document.body.clientHeight}}}if(x<A){pageHeight=A}else{pageHeight=x}if(z<y){pageWidth=z}else{pageWidth=y}arrayPageSize=new Array(pageWidth,pageHeight,y,A);return arrayPageSize}function h(){var y,x;if(self.pageYOffset){x=self.pageYOffset;y=self.pageXOffset}else{if(document.documentElement&&document.documentElement.scrollTop){x=document.documentElement.scrollTop;y=document.documentElement.scrollLeft}else{if(document.body){x=document.body.scrollTop;y=document.body.scrollLeft}}}arrayPageScroll=new Array(y,x);return arrayPageScroll}function q(z){var y=new Date();x=null;do{var x=new Date()}while(x-y<z)}return this.unbind("click").click(v)}})(jQuery);(function($){$.fn.markItUp=function(settings,extraSettings){var options,ctrlKey,shiftKey,altKey;ctrlKey=shiftKey=altKey=false;options={id:"",nameSpace:"",root:"/lib/markitup/",previewInWindow:"",previewAutoRefresh:true,previewPosition:"after",previewTemplatePath:"/php/code_preview.php",previewParserPath:"/php/code_preview.php",previewParserVar:"_ajax=1&content",resizeHandle:true,beforeInsert:"",afterInsert:"",onEnter:{},onShiftEnter:{},onCtrlEnter:{},onTab:{},markupSet:[{}]};$.extend(options,settings,extraSettings);if(!options.root){$("script").each(function(a,tag){miuScript=$(tag).get(0).src.match(/(.*)jquery\.markitup(\.pack)?\.js$/);if(miuScript!==null){options.root=miuScript[1]}})}return this.each(function(){var $$,textarea,levels,scrollPosition,caretPosition,caretOffset,clicked,hash,header,footer,previewWindow,template,iFrame,abort;$$=$(this);textarea=this;levels=[];abort=false;scrollPosition=caretPosition=0;caretOffset=-1;options.previewParserPath=localize(options.previewParserPath)+"?type="+options.nameSpace;options.previewTemplatePath=localize(options.previewTemplatePath)+"?type="+options.nameSpace;if(options.nameSpace=="wiki"){previewWindow=true}function localize(data,inText){if(inText){return data.replace(/("|')~\//g,"$1"+options.root)}return data.replace(/^~\//,options.root)}function init(){id="";nameSpace="";if(options.id){id='id="'+options.id+'"'}else{if($$.attr("id")){id='id="markItUp'+($$.attr("id").substr(0,1).toUpperCase())+($$.attr("id").substr(1))+'"'}}if(options.nameSpace){nameSpace='class="'+options.nameSpace+'"'}$$.wrap("<div "+nameSpace+'"></div>');$$.wrap("<div "+id+' class="markItUp"></div>');$$.wrap('<div class="markItUpContainer"></div>');$$.addClass("markItUpEditor");header=$("<div></div>").insertBefore($$);var rv="";for(var i=0;i<options.markupSet.length;i++){var temp=$('<div class="markItUpHeader"></div>');$(dropMenus(options.markupSet[i],i+1)).appendTo(temp);$(temp).appendTo(header)}footer=$('<div class="markItUpFooter"></div>').insertAfter($$);if(options.resizeHandle===true&&$.browser.safari!==true){resizeHandle=$('<div class="markItUpResizeHandle"></div>').insertAfter($$).bind("mousedown",function(e){var h=$$.height(),y=e.clientY,mouseMove,mouseUp;mouseMove=function(e){$$.css("height",Math.max(20,e.clientY+h-y)+"px");return false};mouseUp=function(e){$("html").unbind("mousemove",mouseMove).unbind("mouseup",mouseUp);return false};$("html").bind("mousemove",mouseMove).bind("mouseup",mouseUp)});footer.append(resizeHandle)}$$.keydown(keyPressed).keyup(keyPressed);$$.bind("insertion",function(e,settings){if(settings.target!==false){get()}if(textarea===$.markItUp.focused){markup(settings)}});$$.focus(function(){$.markItUp.focused=this})}function dropMenus(markupSet,line){var ul=$("<ul></ul>"),i=0;$("li:hover > ul",ul).css("display","block");$(markupSet).each(function(){var button=this,t="",title,li,j;title=(button.key)?(button.name||"")+" [Ctrl+"+button.key+"]":(button.name||"");key=(button.key)?'accesskey="'+button.key+'"':"";if(button.separator){li=$('<li class="markItUpSeparator">'+(button.separator||"")+"</li>").appendTo(ul)}else{i++;for(j=levels.length-1;j>=0;j--){t+=levels[j]+"-"}li=$('<li class="markItUpButton markItUpButton'+line+"x"+t+(i)+" "+(button.className||"")+'"><a href="" '+key+' title="'+title+'">'+(button.name||"")+"</a></li>").bind("contextmenu",function(){return false}).click(function(){return false}).mouseup(function(){if(button.call){eval(button.call)()}markup(button);return false}).hover(function(){$("> ul",this).show().css("z-index",99999);$(document).one("click",function(){$("ul ul",header).hide()})},function(){$("> ul",this).hide()}).appendTo(ul);if(button.dropMenu){levels.push(i);$(li).addClass("markItUpDropMenu").append(dropMenus(button.dropMenu))}}});levels.pop();return ul}function magicMarkups(string){if(string){string=string.toString();string=string.replace(/\(\!\(([\s\S]*?)\)\!\)/g,function(x,a){var b=a.split("|!|");if(altKey===true){return(b[1]!==undefined)?b[1]:b[0]}else{return(b[1]===undefined)?"":b[0]}});string=string.replace(/\[\!\[([\s\S]*?)\]\!\]/g,function(x,a){var b=a.split(":!:");if(abort===true){return false}value=prompt(b[0],(b[1])?b[1]:"");if(value===null){abort=true}return value});return string}return""}function prepare(action){if($.isFunction(action)){action=action(hash)}return magicMarkups(action)}function build(string){openWith=prepare(clicked.openWith);placeHolder=prepare(clicked.placeHolder);replaceWith=prepare(clicked.replaceWith);closeWith=prepare(clicked.closeWith);if(replaceWith!==""){block=openWith+replaceWith+closeWith}else{if(selection===""&&placeHolder!==""){block=openWith+placeHolder+closeWith}else{block=openWith+(string||selection)+closeWith}}return{block:block,openWith:openWith,replaceWith:replaceWith,placeHolder:placeHolder,closeWith:closeWith}}function markup(button){var len,j,n,i;hash=clicked=button;get();$.extend(hash,{line:"",root:options.root,textarea:textarea,selection:(selection||""),caretPosition:caretPosition,ctrlKey:ctrlKey,shiftKey:shiftKey,altKey:altKey});prepare(options.beforeInsert);prepare(clicked.beforeInsert);if(ctrlKey===true&&shiftKey===true){prepare(clicked.beforeMultiInsert)}$.extend(hash,{line:1});if(ctrlKey===true&&shiftKey===true){lines=selection.split(/\r?\n/);for(j=0,n=lines.length,i=0;i<n;i++){if($.trim(lines[i])!==""){$.extend(hash,{line:++j,selection:lines[i]});lines[i]=build(lines[i]).block}else{lines[i]=""}}string={block:lines.join("\n")};start=caretPosition;len=string.block.length+(($.browser.opera)?n:0)}else{if(ctrlKey===true){string=build(selection);start=caretPosition+string.openWith.length;len=string.block.length-string.openWith.length-string.closeWith.length;len-=fixIeBug(string.block)}else{if(shiftKey===true){string=build(selection);start=caretPosition;len=string.block.length;len-=fixIeBug(string.block)}else{string=build(selection);start=caretPosition+string.block.length;len=0;start-=fixIeBug(string.block)}}}if((selection===""&&string.replaceWith==="")){caretOffset+=fixOperaBug(string.block);start=caretPosition+string.openWith.length;len=string.block.length-string.openWith.length-string.closeWith.length;caretOffset=$$.val().substring(caretPosition,$$.val().length).length;caretOffset-=fixOperaBug($$.val().substring(0,caretPosition))}$.extend(hash,{caretPosition:caretPosition,scrollPosition:scrollPosition});if(string.block!==selection&&abort===false){insert(string.block);set(start,len)}else{caretOffset=-1}get();$.extend(hash,{line:"",selection:selection});if(ctrlKey===true&&shiftKey===true){prepare(clicked.afterMultiInsert)}prepare(clicked.afterInsert);prepare(options.afterInsert);if(previewWindow&&options.previewAutoRefresh){refreshPreview()}shiftKey=altKey=ctrlKey=abort=false}function fixOperaBug(string){if($.browser.opera){return string.length-string.replace(/\n*/g,"").length}return 0}function fixIeBug(string){if($.browser.msie){return string.length-string.replace(/\r*/g,"").length}return 0}function insert(block){if(document.selection){var newSelection=document.selection.createRange();newSelection.text=block}else{$$.val($$.val().substring(0,caretPosition)+block+$$.val().substring(caretPosition+selection.length,$$.val().length))}}function set(start,len){if(textarea.createTextRange){if($.browser.opera&&$.browser.version>=9.5&&len==0){return false}range=textarea.createTextRange();range.collapse(true);range.moveStart("character",start);range.moveEnd("character",len);range.select()}else{if(textarea.setSelectionRange){textarea.setSelectionRange(start,start+len)}}textarea.scrollTop=scrollPosition;textarea.focus()}function get(){textarea.focus();scrollPosition=textarea.scrollTop;if(document.selection){selection=document.selection.createRange().text;if($.browser.msie){var range=document.selection.createRange(),rangeCopy=range.duplicate();rangeCopy.moveToElementText(textarea);caretPosition=-1;while(rangeCopy.inRange(range)){rangeCopy.moveStart("character");caretPosition++}}else{caretPosition=textarea.selectionStart}}else{caretPosition=textarea.selectionStart;selection=$$.val().substring(caretPosition,textarea.selectionEnd)}return selection}function preview(){if(!previewWindow||previewWindow.closed){if(options.previewInWindow){previewWindow=window.open("","preview",options.previewInWindow)}else{iFrame=$('<div class="markItUpPreviewFrame post_content"></div>');if(options.previewPosition=="after"){iFrame.insertAfter(footer)}else{iFrame.insertBefore(header)}previewWindow=iFrame}}else{if(altKey===true){if(iFrame){iFrame.remove()}previewWindow.close();previewWindow=iFrame=false}}if(!options.previewAutoRefresh){refreshPreview()}}function refreshPreview(){if(options.nameSpace=="wiki"){$.ajax({type:"POST",url:"/php/code_preview.php?type=wiki",data:options.previewParserVar+"="+encodeURIComponent($$.val()),dataType:"html",async:true,success:function(d){$("#wiki_preview").html(d)}})}else{if(previewWindow){try{sp=previewWindow.document.documentElement.scrollTop}catch(e){sp=0}$.ajax({type:"POST",async:true,url:"/php/code_preview.php?type="+options.nameSpace,data:options.previewParserVar+"="+encodeURIComponent($$.val()),success:function(data){previewWindow.html(localize(data,1))}})}if(options.previewInWindow){previewWindow.focus()}}}function keyPressed(e){shiftKey=e.shiftKey;altKey=e.altKey;ctrlKey=(!(e.altKey&&e.ctrlKey))?e.ctrlKey:false;if(e.type==="keydown"){if(ctrlKey===true){li=$("a[accesskey="+String.fromCharCode(e.keyCode)+"]",header).parent("li");if(li.length!==0){ctrlKey=false;li.triggerHandler("mouseup");return false}}if(e.keyCode===13||e.keyCode===10){if(ctrlKey===true){ctrlKey=false;markup(options.onCtrlEnter);return options.onCtrlEnter.keepDefault}else{if(shiftKey===true){shiftKey=false;markup(options.onShiftEnter);return options.onShiftEnter.keepDefault}else{markup(options.onEnter);return options.onEnter.keepDefault}}}if(e.keyCode===9){if(caretOffset!==-1){get();caretOffset=$$.val().length-caretOffset;set(caretOffset,0);caretOffset=-1;return false}else{markup(options.onTab);return options.onTab.keepDefault}}}}init()})};$.fn.markItUpRemove=function(){return this.each(function(){$$=$(this).unbind().removeClass("markItUpEditor");$$.parent("div").parent("div.markItUp").parent("div").replaceWith($$)})};$.markItUp=function(settings){var options={target:false};$.extend(options,settings);if(options.target){return $(options.target).each(function(){$(this).focus();$(this).trigger("insertion",[options])})}else{$("textarea").trigger("insertion",[options])}}})(jQuery);myBbcodeSettings={nameSpace:"bbcode",previewParserPath:"~/sets/bbcode/preview.php",onEnter:false,markupSet:[[{name:"Fett",key:"B",openWith:"[b]",closeWith:"[/b]"},{name:"Kursiv",key:"I",openWith:"[i]",closeWith:"[/i]"},{name:"Unterstrichen",key:"U",openWith:"[u]",closeWith:"[/u]"},{separator:"---------------"},{name:"Lightbox",key:"P",replaceWith:"[lightbox][![Url]!][/lightbox]"},{name:"Bild",replaceWith:"[img][![Url]!][/img]"},{name:"Link",key:"L",openWith:"[url=[![Url]!]]",closeWith:"[/url]",placeHolder:"Dein Linktext..."},{separator:"---------------"},{name:"Farben",openWith:"[color=[![Color]!]]",closeWith:"[/color]",dropMenu:[{name:"Gelb",openWith:"[color=yellow]",closeWith:"[/color]",className:"col1-1"},{name:"Orange",openWith:"[color=orange]",closeWith:"[/color]",className:"col1-2"},{name:"Rot",openWith:"[color=red]",closeWith:"[/color]",className:"col1-3"},{name:"Blau",openWith:"[color=blue]",closeWith:"[/color]",className:"col2-1"},{name:"Lila",openWith:"[color=purple]",closeWith:"[/color]",className:"col2-2"},{name:"Gr&uuml;n",openWith:"[color=green]",closeWith:"[/color]",className:"col2-3"},{name:"Wei&szlig",openWith:"[color=white]",closeWith:"[/color]",className:"col3-1"},{name:"Grau",openWith:"[color=gray]",closeWith:"[/color]",className:"col3-2"},{name:"Schwarz",openWith:"[color=black]",closeWith:"[/color]",className:"col3-3"}]},{name:"Gr&ouml;&szlig;e",key:"S",openWith:"[size=[![Text size]!]]",closeWith:"[/size]",dropMenu:[{name:"Klein",openWith:"[size=8]",closeWith:"[/size]"},{name:"Normal",openWith:"[size=11]",closeWith:"[/size]"},{name:"Gro&szlig;",openWith:"[size=16]",closeWith:"[/size]"},{name:"Riesig",openWith:"[size=20]",closeWith:"[/size]"}]},{separator:"---------------"},{name:"Linksb&uuml;ndig",openWith:"[left]\n",closeWith:"\n[/left]"},{name:"Zentriert",openWith:"[center]\n",closeWith:"\n[/center]"},{name:"Rechtssb&uuml;ndig",openWith:"[right]\n",closeWith:"\n[/right]"},{separator:"---------------"},{name:"Liste",openWith:"[list]\n",closeWith:"\n[/list]"},{name:"Numerische Liste",openWith:"[list=[![Starting number]!]]\n",closeWith:"\n[/list]"},{name:"Listenfeld",openWith:"[*] "},{separator:"---------------"},{name:"Quote",openWith:"[quote]",closeWith:"[/quote]"},{name:"Code",openWith:"[code]",closeWith:"[/code]"},{separator:"---------------"},{name:"Spoiler",openWith:"[spoiler]",closeWith:"[/spoiler]"},{name:"Hidden - Diesen Text k&ouml;nnen nur Mitglieder sehen",openWith:"[hidden]",closeWith:"[/hidden]"},{separator:"---------------"},{name:"Youtube",openWith:"[youtube]",closeWith:"[/youtube]"},{separator:"---------------"},{name:"Vorschau",className:"preview",call:"preview"}],[{name:":)",openWith:":)"},{name:";)",openWith:";)"},{name:":|",openWith:":|"},{name:":(",openWith:":("},{name:":o",openWith:":o"},{name:":p",openWith:":p"},{name:"B)",openWith:"B)"},{name:":D",openWith:":D"},{name:":@",openWith:":@"},{name:":^)",openWith:":^)"},{name:"(blush)",openWith:"(blush)"},{name:"(wasntme)",openWith:"(wasntme)"},{name:"(hihi)",openWith:"(hihi)"},{name:"(puke)",openWith:"(puke)"},{name:"(bandit)",openWith:"(bandit)"},{name:"(mooning)",openWith:"(mooning)"},{name:"(wait)",openWith:"(wait)"},{name:"(headbang)",openWith:"(headbang)"},{name:"(drunk)",openWith:"(drunk)"},{name:"(rock)",openWith:"(rock)"},{name:"(wave)",openWith:"(wave)"},{name:"(fubar)",openWith:"(fubar)"},{name:"(finger)",openWith:"(finger)"},{name:"(swear)",openWith:"(swear)"},{name:"(rofl)",openWith:"(rofl)"},{name:"(honk)",openWith:"(honk)"},{name:"(f)",openWith:"(f)"},{name:"(e)",openWith:"(e)"}]]};myWikiSettings={nameSpace:"wiki",previewParserPath:"",onShiftEnter:{keepDefault:false,replaceWith:"\n\n"},markupSet:[[{name:"Heading 1",key:"1",openWith:"== ",closeWith:" ==",placeHolder:"Your title here..."},{name:"Heading 2",key:"2",openWith:"=== ",closeWith:" ===",placeHolder:"Your title here..."},{name:"Heading 3",key:"3",openWith:"==== ",closeWith:" ====",placeHolder:"Your title here..."},{name:"Heading 4",key:"4",openWith:"===== ",closeWith:" =====",placeHolder:"Your title here..."},{name:"Heading 5",key:"5",openWith:"====== ",closeWith:" ======",placeHolder:"Your title here..."},{separator:"---------------"},{name:"Fett",key:"B",openWith:"'''",closeWith:"'''"},{name:"Kursiv",key:"I",openWith:"''",closeWith:"''"},{name:"Durchgestrichen",key:"S",openWith:"<s>",closeWith:"</s>"},{separator:"---------------"},{name:"Liste",openWith:"(!(* |!|*)!)"},{name:"Numerische Liste",openWith:"(!(# |!|#)!)"},{separator:"---------------"},{name:"Bild",key:"P",replaceWith:"[[Image:[![Url:!:http://]!]|[![name]!]]]"},{name:"Link",key:"L",openWith:"[[![Link]!]|",closeWith:"]",placeHolder:"Your text to link here..."},{name:"Url",openWith:"[[![Url:!:http://]!]|",closeWith:"]",placeHolder:"Your text to link here..."},{separator:"---------------"},{name:"Quotes",openWith:"(!(> |!|>)!)",placeHolder:""},{name:"Code",openWith:'(!(<source lang="[![Language:!:php]!]">|!|<pre>)!)',closeWith:"(!(</source>|!|</pre>)!)"},{separator:"---------------"},{name:"Vorschau",call:"preview",className:"preview"}]]};var currentRequest=false;var ildd={def:{track:false,positionBy:"element",extraClass:"dropdown",top:18,left:0,initDelay:200,exitDelay:600,bodyFn:"ul",bodyHandler:function(e){var b,f="";for(var c=1;;c++){if(!(b=this.getAttribute("data-dd-item-"+c))){break}else{f+="<li>"+b+"</li>"}}return"<ul>"+f+"</ul>"}},menuRadio:{track:false,positionBy:"element",extraClass:"dropdown",top:24,left:-12,initDelay:200,exitDelay:600,bodyFn:"ul",bodyHandler:function(a){return"<ul><li>"+this.getAttribute("data-radio")+"</li></ul>"}},menuForum:{track:false,positionBy:"element",extraClass:"dropdown",top:0,left:160,initDelay:400,jumpDelay:50,exitDelay:800},user:{track:false,positionBy:"element",extraClass:"dropdown",top:15,left:10,initDelay:800,exitDelay:300,bodyHandler:function(a){return user_tooltips[this.getAttribute("data-dd-user-id")]}},mmchl:{track:false,positionBy:"element",extraClass:"dropdown",top:35,initDelay:300,exitDelay:800},dragDrop:{track:false,positionBy:"absolute",extraClass:"dropdown",top:20,left:20,initDelay:400,jumpDelay:50,exitDelay:-1,dragDropElement:".dragDrop",hideOnInnerClick:false,hideOnOuterClick:false}};var serializeArrayPost=function(b){var c="";for(k in b){if(typeof b[k]=="object"){c+=serializeArrayPostSub(String(k),b[k])}else{c+="&"+escape(String(k))+"="+escape(String(b[k]))}}return c};var serializeArrayPostSub=function(c,b){var d="",e="";for(k2 in b){e=c+"/"+String(k2);if(typeof b[k2]=="object"){d+="&"+serializeArrayPostSub(e,b[k2])}else{d+="&"+escape(e)+"="+escape(String(b[k2]))}}return d};var handleJson=function(d){for(var i=0;i<d.s1.length;i++){try{eval(d.s1[i])}catch(e){reportAjaxError("s^1: "+e+"\n"+d.s1[i])}}if(d.title){document.title=d.title}if(d.e){for(var e in d.e){if(d.e[e]==null){continue}var ec=e.substr(0,1);if(ec=="#"||ec=="."||ec=="["){ec=e}else{ec="#"+e}if(typeof d.e[e]=="object"){switch(d.e[e].fn){case 1:for(var i=0;i<d.e[e].d.length;i++){$(ec).append(d.e[e].d[i])}break;case 2:for(var i=0;i<d.e[e].d.length;i++){$(ec).prepend(d.e[e].d[i])}break;case 3:for(var i=0;i<d.e[e].d.length;i++){$(ec).before(d.e[e].d[i])}break;case 4:for(var i=0;i<d.e[e].d.length;i++){$(ec).after(d.e[e].d[i])}break}}else{if(e=="__obj__"){$(arguments[1]).replaceWith(d.e[e])}else{var ec=e.substr(0,1);if(ec=="#"||ec=="."||ec=="["){$(e).html(d.e[e])}else{$("#"+e).html(d.e[e])}}}}}if(d.r){for(var e in d.r){if(d.r[e]==null){continue}if(e=="__obj__"){$(arguments[1]).replaceWith(d.r[e])}else{var ec=e.substr(0,1);if(ec=="#"||ec=="."||ec=="["){$(e).replaceWith(d.r[e])}else{$("#"+e).replaceWith(d.r[e])}}}}for(var i=0;i<d.s.length;i++){try{eval(d.s[i])}catch(e){reportAjaxError("s: "+e+"\n"+d.s[i])}}};var lastAjaxUpdate=new Date().getTime();var ajaxUpdate=function(){var a=new Date().getTime();if((!currentRequest&&lastAjaxUpdate+ajaxUpdateInterval<a)||lastAjaxUpdate+ajaxUpdateInterval+60<a){iC()}};var iC_confirm=function(f,e,d,a,c,b){return confirm(f)?iC(e,d,a,c,b):false};var iC=function(obj,data,args,useHistory,successCb){currentRequest=true;lastAjaxUpdate=new Date().getTime();var opts={obj:null,data:"",href:""};if(obj){opts.obj=$(obj);if(!opts.obj.length){opts.obj=null}}switch(typeof obj){case"object":if(obj.action){opts.href=obj.action}else{if(obj.href){opts.href=obj.href}}opts.data+="&"+$(obj).serialize();if($(obj).attr("name")){opts.data+="&"+escape($(obj).attr("name"))+"="+escape($(obj).attr("value"))}break;case"string":if(m=String(obj).match(/^~(.*)$/)){opts.obj=$(obj).parents(m[1]);if(!opts.obj.length){opts.obj=null}else{if(opts.obj.attr("name")){opts.data+="&"+escape(opts.obj.attr("name"))+"="+escape(opts.obj.attr("value"))}}}else{if(m=String(obj).match(/^([#\.].*)$/)){opts.obj=$(m[1]);if(!opts.obj.length){opts.obj=null}else{if(opts.obj.attr("name")){opts.data+="&"+escape(opts.obj.attr("name"))+"="+escape(opts.obj.attr("value"))}}}else{opts.data+="&"+obj}}break}switch(typeof data){case"string":if(m=String(data).match(/^~(.*)$/)){opts.obj=$(obj).parents(m[1]);is_obj=true}else{if(m=String(data).match(/^([#\.].*)$/)){opts.obj=$(m[1]);is_obj=true}else{opts.data+="&"+data;is_obj=false}}if(is_obj){if(!opts.obj.length){opts.obj=null}else{if(opts.obj.attr("name")){opts.data+="&"+escape(opts.obj.attr("name"))+"="+escape(opts.obj.attr("value"))}}}break;case"object":opts.obj=$(data);if(!opts.obj.length){opts.obj=null}else{if(opts.obj.attr("name")){opts.data+="&"+escape(opts.obj.attr("name"))+"="+escape(opts.obj.attr("value"))}}break;case"null":this.obj=null;break}var myrtd=$.extend({},ilrtd);opts.mybackup={};for(mod in myrtd.imodules){if(imodule_conditions[mod]){backup=imodule_conditions[mod](myrtd.imodules[mod]);if(backup){opts.mybackup[mod]=backup}}}myrtd.current_location=String(document.location);if(args){opts.data+="&"+args}opts.successCb=successCb;opts.useHistory=useHistory;if(useHistory&&history&&history.pushState){myrtd.html5_history=1;opts.href_history=opts.href}opts.data+=serializeArrayPost(myrtd);opts.data+="&_ajax=1";opts.id=(i=String(opts.href).indexOf("#"))!=-1?String(opts.href).substr(i+1):null;opts.href="/"+ilrtd.current_language+"/ajax/"+String(opts.href).replace(/^https?:\/\/[^\/]+/i,"").replace(/^\/(de|en)\//,"/").replace(/^\/+/,"");if(typeof currentRequest==="object"){currentRequest.abort();$(".ajax-loader-ic").remove()}currentRequest=$.ajax({type:"POST",url:opts.href,data:opts.data,dataType:"html",async:true,beforeSend:function(){if(opts.obj){var p=opts.obj.position();opts.loader=$('<div class="ajax-loader-ic"/>').css({top:p.top-2,left:p.left-2,width:opts.obj.outerWidth()+4,height:opts.obj.outerHeight()+4,display:"block"}).appendTo("body");opts.loader.hide().fadeTo(300,opts.loader.css("opacity"))}},success:function(d){try{if(typeof d=="undefined"||!d){if(opts.loader){opts.loader.remove()}return}var e=null;if(e=String(d).match(/^([^\{]+)(\{.+)?$/)){reportAjaxError("runtime-error-1:<br>"+e[1]);d=e[2]}if(e=String(d).match(/^(.+\})?([^\}]+)$/)){reportAjaxError("runtime-error-2:<br>"+e[1]);d=e[2]}eval("d = "+d);handleJson(d,opts.obj);if(opts.useHistory&&opts.href_history&&history&&history.pushState){history.pushState(opts.href_history,d.title||null,opts.href_history)}if(opts.mybackup){ilrtd.imodules=$.extend(true,opts.mybackup,ilrtd.imodules)}initAjax()}catch(e){if(opts.loader){opts.loader.remove()}reportAjaxError("ajax.successHandler: "+e+"\n\n"+d)}if(opts.loader&&(typeof d.keep_loading=="undefined"||d.keep_loading===false||d.keep_loading=="false")){opts.loader.remove()}if(opts.id){try{if(opts.id=="0"){window.scrollTo(0,0)}else{var e=$("#"+opts.id);window.scrollTo(0,e.position().top)}}catch(e){}}currentRequest=false;if(opts.successCb){opts.successCb(opts)}},error:function(x,o,e){if(opts.loader){opts.loader.remove()}switch(x.status){case"0":txt="Connection timed out";break;case"404":txt="404 Not Found";break;case"500":txt="500 Internal Server Error";break;case"501":txt="501 Not Implemented";break;case"502":txt="502 Bad Gateway";break;case"503":txt="503 Service Unavailable";break;case"504":txt="504 Gateway Timeout";break;case"505":txt="505 HTTP Version Not Supported";break;default:txt="Unknown: "+x.status;break}reportAjaxError(x.status+" "+x.statusText+" "+txt);currentRequest=false}});return false};function initAjax(){$(".image:not(.lb-i)").addClass("lb-i").lightBox();$(".bbcodeedit:not(.bbe-i)").addClass("bbe-i").markItUp(myBbcodeSettings);$(".wikiedit:not(.we-i)").addClass("we-i").markItUp(myWikiSettings);$(".im_chat-pages:not(.ic-p)").addClass("ic-p").each(function(){var form=$(this).find("form.im-chat-page-form"),page=form.find("input.im-chat-page");$(this).find("a").addClass("lb-anc").click(function(){if(m=String(this.href).match(/\/([0-9]+)\/$/)){page.val(m[1]);form.submit();return false}})});try{$("[data-tooltip]:not(.tt-i)").addClass("tt-i").tooltip({extraClass:"default-tooltip",jumpDelay:0,bodyHandler:function(){return this.getAttribute("data-tooltip")}})}catch(e){}try{$("[data-dd]:not(.dd-i)").addClass("dd-i").each(function(){var s=this.getAttribute("data-dd");s=(s?String(s):false);if(s){try{eval("var s="+s+";")}catch(e){reportAjaxError(""+e)}}else{var s={}}$(this).tooltip($.extend({bodyHandler:function(s){return this.getAttribute("data-dd-body")},readyHandler:function(){initAjax()}},s))})}catch(e){}$('a:not(.lb-anc):not([target]):not([name]):not([onclick]):not([rel]):not([href^="javascript:"])[href!=""]').addClass("lb-anc").click(function(){if(typeof event!=="undefined"&&(event.ctrlKey||event.shiftKey||event.altKey)){return true}return iC(this,"#Module","imodules/ajax/action=select_module",true,function(opts){if(!opts.id){window.scrollTo(0,0)}})});updateTimestamps()}var mslide=function(a,b){var c=$(a).next();$(a).find("input[name$=display]").attr("value",c[0].style.display=="none"?"yes":"no");iC(a,null);c.slideToggle(150);return false};var updateTimestamps=function(){$("[data-timestamp]").each(function(){var c=this.getAttribute("data-timestamp-j");if(!c){c=Math.round(new Date().getTime()/1000);this.setAttribute("data-timestamp-j",c)}c=(c-Math.round(new Date().getTime()/1000))-this.getAttribute("data-timestamp");var b=c<0;if(b){c=-c}len=[60,60,24,7,4.35,12];for(var a=0;len.length>a&&c>=len[a];a++){c/=len[a]}var d=(b?"MODE_1":"MODE_2");if(c==0){c=LANG_TIME[d][0]}else{c=Math.round(c);if(c==1){c=String(LANG_TIME.ONE[a])+" "+LANG_TIME.SINGULAR[a]}else{c=String(c)+" "+LANG_TIME.PLURAL[a]}c=LANG_TIME[d][b?1:2].replace(/%s/,c)}if(this.innerHTML!=c){this.innerHTML=c}})};function chat_base_submit(c,f,b,e){var d=$(c);var a=d.find("textarea");if(!a.length){a=d.find("input[type=text]")}a=a[0];if(a.value.length<=0||a.value==f){alert(b)}else{iC(c);a.value="";d.find("[type=submit]").html(e)}return false}im_chat_submit=chat_base_submit;function im_tabs_switch(a,b){if(typeof event!=="undefined"&&(event.ctrlKey||event.shiftKey||event.altKey)){return true}s=$(a).parent().parent();return iC(a,"#"+b+"__content",undefined,true,function(c){s.parent().find("div").removeClass("active").addClass("normal");s.addClass("active")})}var imodule_conditions={poll:function(b){if(!b.IDLE){return}var c=0,a={IDLE:{}};for(var d in b.IDLE){var f=$(".poll-item-"+d);if(!f.length){b.IDLE[d]=null}else{if(!f.is(":visible")){c++;a.IDLE[d]=b.IDLE[d];b.IDLE[d]=null}}}return c?a:false},forum:function(c){if(!c.IDLE){return}var f=0,b={IDLE:{}};for(var d in c.IDLE){for(var a in c.IDLE[d]){var g=$("#IM_MENU_forum_"+d+"_"+a);if(!g.length){c.IDLE[d][a]=null}else{if(!g.is(":visible")){f++;if(!b.IDLE[d]){b.IDLE[d]={}}b.IDLE[d][a]=c.IDLE[d][a];c.IDLE[d][a]=null}}}}return f?b:false},online_users:function(b){if(!b.IDLE){return}var c=0,a={IDLE:{}};if(b.IDLE.menu){var d=$("#IM_MENU_online_users");if(!d.length){b.IDLE.menu=null}else{if(!d.is(":visible")){c++;a.IDLE.menu=b.IDLE.menu;b.IDLE.menu=null}}}return c?a:false},radio:function(b){if(!b.IDLE){return}var c=0,a={IDLE:{}};if(b.IDLE.menu){var d=$("#IM_MENU_radio");if(!d.length){b.IDLE.menu=null}else{if(!d.is(":visible")){c++;a.IDLE.menu=b.IDLE.menu;b.IDLE.menu=null}}}return c?a:false},__chat2_prototype:function(l,h){if(!l.IDLE){return}var b=0,f={IDLE:{chat:{}}},a=0;for(var c in l.IDLE){if(!String(c).match(/^im_chat/)){continue}var j=0;for(var n in l.IDLE[c]){var o=0;for(var d in l.IDLE[c][n]){if(d=="last_id"){continue}var g=$("#"+h+"_"+c+n+d);if(!g.length){l.IDLE[c][n][d]=null}else{o++}}if(!o){l.IDLE[c][n]=null}else{j++}}if(!j){l.IDLE[c]=null}else{a++}}if(!a){l.IDLE=null}return b?f:false}};imodule_conditions.shoutbox=function(a){return imodule_conditions.__chat2_prototype(a,"shoutbox")};imodule_conditions.chat=function(a){return imodule_conditions.__chat2_prototype(a,"chat")};imodule_conditions.i=function(a){return imodule_conditions.__chat2_prototype(a,"i")};function dump(a,g){var f="";if(!g){g=0}var e="";for(var b=0;b<g+1;b++){e+="    "}if(typeof(a)=="object"){for(var c in a){var d=a[c];if(typeof(d)=="object"){f+=e+"'"+c+"' ...\n";f+=dump(d,g+1)}else{f+=e+"'"+c+"' => \""+d+'"\n'}}}else{f="===>"+a+"<===("+typeof(a)+")"}return f}$(function(){if(history&&history.pushState){$(window).bind("popstate",function(a){if(a.originalEvent.state){document.location=a.originalEvent.state}})}$(".sf-menu").superfish({delay:400,delayOver:350,speed:200,dropShadows:false,disableHI:true});initAjax();updateTimestamps();setInterval(updateTimestamps,5000)});